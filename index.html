<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Shorts Player</title>
  <style>
    /* ===== 기본 리셋 ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    /* ===== 전체 레이아웃 ===== */
    body {
      background: linear-gradient(135deg, #fef2f2 0%, #fce7f3 100%);
      font-family: 'Segoe UI', Arial, sans-serif;
      overflow: hidden;
      height: 100vh;
    }
    
    .container {
      display: flex;
      height: 100vh;
      gap: 20px;
      padding: 20px;
    }
    
    /* ===== 메인 콘텐츠 영역 ===== */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 20px;
    }
    
    .header h1 {
      font-size: 32px;
      font-weight: bold;
      color: #1f2937;
      text-align: center;
    }
    
    /* ===== 비디오 카드 ===== */
    .video-card {
      background: white;
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
      overflow: hidden;
      width: 100%;
      max-width: 500px;
      position: relative;
    }
    
    .video-wrapper {
      width: 100%;
      aspect-ratio: 9/16;
      position: relative;
    }
    
    #youtube-player {
      width: 100%;
      height: 100%;
    }
    
    /* ===== 다음 버튼 ===== */
    .next-btn {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background: linear-gradient(135deg, #ec4899 0%, #ef4444 100%);
      border: none;
      color: white;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      box-shadow: 0 8px 20px rgba(236, 72, 153, 0.4);
      z-index: 10;
    }
    
    .next-btn:hover {
      transform: scale(1.1) rotate(10deg);
      box-shadow: 0 12px 30px rgba(236, 72, 153, 0.6);
    }
    
    /* ===== 사이드바 (재생목록) ===== */
    .sidebar {
      width: 320px;
      background: white;
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    
    /* ===== 재생목록 헤더 ===== */
    .playlist-header {
      padding: 24px;
      border-bottom: 2px solid #f3f4f6;
    }
    
    .playlist-title {
      color: #374151;
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 12px;
    }
    
    .playlist-count {
      display: inline-block;
      background: linear-gradient(135deg, #ec4899 0%, #ef4444 100%);
      color: white;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: bold;
    }
    
    /* ===== 재생목록 아이템 컨테이너 ===== */
    .playlist-items {
      flex: 1;
      overflow-y: auto;
      padding: 12px;
    }
    
    /* 스크롤바 스타일링 */
    .playlist-items::-webkit-scrollbar {
      width: 6px;
    }
    
    .playlist-items::-webkit-scrollbar-track {
      background: #f3f4f6;
      border-radius: 3px;
    }
    
    .playlist-items::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #ec4899 0%, #ef4444 100%);
      border-radius: 3px;
    }
    
    /* ===== 재생목록 개별 아이템 ===== */
    .playlist-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      margin-bottom: 8px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      background: #f9fafb;
    }
    
    .playlist-item:hover {
      background: #f3f4f6;
      transform: translateX(-4px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .playlist-item.active {
      background: linear-gradient(135deg, #fce7f3 0%, #fecdd3 100%);
      box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);
    }
    
    /* 썸네일 */
    .playlist-item-thumbnail {
      flex-shrink: 0;
      width: 50px;
      height: 70px;
      border-radius: 8px;
      overflow: hidden;
      position: relative;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .playlist-item-thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .playlist-item.active .playlist-item-thumbnail {
      box-shadow: 0 0 0 3px #ec4899;
    }
    
    /* 정보 영역 */
    .playlist-item-info {
      flex: 1;
      min-width: 0;
    }
    
    .playlist-item-title {
      font-size: 15px;
      font-weight: 600;
      color: #374151;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    .playlist-item.active .playlist-item-title {
      color: #be185d;
      font-weight: 700;
    }
    
    /* 재생 상태 표시 */
    .playlist-item-status {
      flex-shrink: 0;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #d1d5db;
    }
    
    .playlist-item.active .playlist-item-status {
      background: #ec4899;
      box-shadow: 0 0 8px rgba(236, 72, 153, 0.6);
      animation: pulse 2s ease-in-out infinite;
    }
    
    /* ===== 애니메이션 ===== */
    @keyframes pulse {
      0%, 100% { 
        opacity: 1; 
        transform: scale(1); 
      }
      50% { 
        opacity: 0.6; 
        transform: scale(1.2); 
      }
    }

    /* ===== 반응형 디자인 ===== */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        max-height: 300px;
      }
    }
  </style>
</head>
<body>
  <!-- 메인 컨테이너 -->
  <div class="container">
    <!-- 비디오 플레이어 영역 -->
    <div class="main-content">
      <div class="header">
        <h1>🎬 YouTube Shorts</h1>
      </div>
      
      <div class="video-card">
        <div class="video-wrapper">
          <div id="youtube-player"></div>
        </div>
        <button class="next-btn" onclick="playNextVideo()" aria-label="다음 영상 재생">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <polygon points="5 4 15 12 5 20 5 4"></polygon>
            <line x1="19" y1="5" x2="19" y2="19"></line>
          </svg>
        </button>
      </div>
    </div>
    
    <!-- 재생목록 사이드바 -->
    <div class="sidebar">
      <div class="playlist-header">
        <div class="playlist-title">재생 목록</div>
        <div class="playlist-count"><span id="video-count">11</span>개</div>
      </div>
      <div class="playlist-items" id="playlist-container"></div>
    </div>
  </div>

  <script>
    // ============================================
    // 전역 변수 및 설정
    // ============================================
    
    /**
     * 재생목록 비디오 데이터
     * @type {Array<{id: string, title: string}>}
     */
    const VIDEO_PLAYLIST = [
      { id: 'I98HHmVP268', title: '재미있는 쇼츠' },
      { id: '-w3nNWFKBsQ', title: '인기 쇼츠' },
      { id: '8KMqM4s7DqQ', title: '추천 쇼츠' },
      { id: '5igcQgtQmDg', title: '트렌딩 쇼츠' },
      { id: 'efeTEX2EvEM', title: '화제의 쇼츠' },
      { id: 'H7gkxlnHYQ4', title: '인기급상승 쇼츠' },
      { id: 'PetkgdcUwC0', title: '베스트 쇼츠' },
      { id: 'NTPwRGfFcGA', title: '추천영상' },
      { id: 'JxB9u58VBlc', title: '핫한 쇼츠' },
      { id: '15X0nd1_-kI', title: '신규 쇼츠 1' },
      { id: 'QYrYZju7O2g', title: '신규 쇼츠 2' }
    ];

    // YouTube 플레이어 객체
    let youtubePlayer = null;
    
    // 현재 재생 중인 비디오 ID (랜덤으로 시작)
    let currentVideoId = VIDEO_PLAYLIST[getRandomVideoIndex()].id;

    // ============================================
    // 유틸리티 함수
    // ============================================
    
    /**
     * YouTube 비디오 썸네일 URL 생성
     * @param {string} videoId - YouTube 비디오 ID
     * @returns {string} 썸네일 이미지 URL
     */
    function getVideoThumbnail(videoId) {
      return `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
    }

    /**
     * 랜덤 비디오 인덱스 생성
     * @returns {number} 랜덤 인덱스
     */
    function getRandomVideoIndex() {
      return Math.floor(Math.random() * VIDEO_PLAYLIST.length);
    }

    // ============================================
    // 비디오 재생 함수
    // ============================================
    
    /**
     * 다음 비디오를 랜덤하게 재생
     */
    function playNextVideo() {
      const randomIndex = getRandomVideoIndex();
      const selectedVideo = VIDEO_PLAYLIST[randomIndex];
      
      currentVideoId = selectedVideo.id;
      
      if (youtubePlayer && youtubePlayer.loadVideoById) {
        // 새 비디오를 로드하고 자동 재생
        youtubePlayer.loadVideoById({
          videoId: currentVideoId,
          startSeconds: 0
        });
        youtubePlayer.playVideo();
      }
      
      updatePlaylistUI();
    }

    /**
     * 특정 비디오 재생
     * @param {string} videoId - 재생할 비디오 ID
     */
    function playVideo(videoId) {
      currentVideoId = videoId;
      
      if (youtubePlayer && youtubePlayer.loadVideoById) {
        // 새 비디오를 로드하고 자동 재생
        youtubePlayer.loadVideoById({
          videoId: videoId,
          startSeconds: 0
        });
        youtubePlayer.playVideo();
      }
      
      updatePlaylistUI();
    }

    // ============================================
    // UI 업데이트 함수
    // ============================================
    
    /**
     * 재생목록 UI 업데이트
     */
    function updatePlaylistUI() {
      const playlistContainer = document.getElementById('playlist-container');
      playlistContainer.innerHTML = '';
      
      VIDEO_PLAYLIST.forEach((video) => {
        const isActive = video.id === currentVideoId;
        const playlistItem = createPlaylistItem(video, isActive);
        playlistContainer.appendChild(playlistItem);
      });
    }

    /**
     * 재생목록 아이템 엘리먼트 생성
     * @param {Object} video - 비디오 정보 객체
     * @param {boolean} isActive - 현재 재생 중인지 여부
     * @returns {HTMLElement} 생성된 재생목록 아이템
     */
    function createPlaylistItem(video, isActive) {
      // 아이템 컨테이너
      const item = document.createElement('div');
      item.className = 'playlist-item' + (isActive ? ' active' : '');
      item.onclick = () => playVideo(video.id);
      
      // 썸네일
      const thumbnail = document.createElement('div');
      thumbnail.className = 'playlist-item-thumbnail';
      
      const img = document.createElement('img');
      img.src = getVideoThumbnail(video.id);
      img.alt = video.title;
      thumbnail.appendChild(img);
      
      // 비디오 정보
      const info = document.createElement('div');
      info.className = 'playlist-item-info';
      
      const title = document.createElement('div');
      title.className = 'playlist-item-title';
      title.textContent = video.title;
      info.appendChild(title);
      
      // 재생 상태 표시
      const status = document.createElement('div');
      status.className = 'playlist-item-status';
      
      // 조립
      item.appendChild(thumbnail);
      item.appendChild(info);
      item.appendChild(status);
      
      return item;
    }

    // ============================================
    // YouTube API 초기화
    // ============================================
    
    /**
     * YouTube IFrame API 준비 완료 콜백
     * (YouTube API가 자동으로 호출)
     */
    function onYouTubeIframeAPIReady() {
      youtubePlayer = new YT.Player('youtube-player', {
        videoId: currentVideoId,
        playerVars: {
          autoplay: 1,        // 자동 재생
          controls: 1,        // 컨트롤 표시
          rel: 0,            // 관련 동영상 최소화
          modestbranding: 1, // YouTube 로고 최소화
          mute: 1,           // 음소거로 시작 (자동재생 정책)
          playsinline: 1,    // 인라인 재생
          loop: 0            // 반복 재생 비활성화
        },
        events: {
          onReady: handlePlayerReady,
          onStateChange: handlePlayerStateChange
        }
      });
      
      updatePlaylistUI();
    }

    /**
     * 플레이어 준비 완료 핸들러
     * @param {Object} event - YouTube 플레이어 이벤트 객체
     */
    function handlePlayerReady(event) {
      // 플레이어가 준비되면 즉시 재생 (음소거 해제)
      event.target.unMute();
      event.target.playVideo();
    }

    /**
     * 플레이어 상태 변경 핸들러
     * @param {Object} event - YouTube 플레이어 이벤트 객체
     */
    function handlePlayerStateChange(event) {
      // 비디오 종료 시 자동으로 다음 비디오 재생
      if (event.data === YT.PlayerState.ENDED) {
        setTimeout(() => {
          playNextVideo();
        }, 500); // 0.5초 딜레이 후 다음 영상 재생
      }
    }

    // ============================================
    // 초기화
    // ============================================
    
    /**
     * YouTube IFrame API 스크립트 로드
     */
    function loadYouTubeAPI() {
      const tag = document.createElement('script');
      tag.src = 'https://www.youtube.com/iframe_api';
      
      const firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    }

    /**
     * 페이지 로드 완료 시 실행
     * - YouTube API 로드
     * - API 로드 완료 후 onYouTubeIframeAPIReady() 자동 호출됨
     * - 랜덤 비디오 자동 재생 시작
     * - 비디오 종료 시 자동으로 다음 랜덤 비디오 재생
     */
    window.onload = function() {
      loadYouTubeAPI();
    };
  </script>
</body>
</html>